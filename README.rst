.. sectnum::

=====================
django-compat-patcher
=====================

A "magic" package which adds retro/forward compatibility patches to Django, so that your app ecosystem doesn't get broken by trivial changes in the core of the framework.

Add :code:`django-compat-patcher` to your pip requirements, install it, and then activate it with::
    
    import django_compat_patcher
    django_compat_patcher.patch()
    
This code must be placed BEFORE any use of django (eg. in your :code:`manage.py` or your :code:`wsgi.py` script).

However, the :code:`DJANGO_SETTINGS_MODULE` environment variable must already be set.

Settings
========

Settings to put in your project's :code:`settings.py`. The value in these settings are the default values.

DCP_INCLUDE_FIXER_IDS
*********************
List of fixer names to include. If :code:`"*"` is used, then all fixers are included.

| **Default:** :code:`"*"`
| **Type:** List of strings, or :code:`"*"`
| **Example:** :code:`DCP_INCLUDE_FIXER_IDS = ['fix_deletion_templatetags_future_url']`

DCP_INCLUDE_FIXER_FAMILIES
**************************
List of fixer families to include.

Note: If you want to include a specific category, remember to remove the :code:`"*"` from :code:`DCP_INCLUDE_FIXER_IDS`.

| **Default:** :code:`[]`
| **Type:** List of strings
| **Choices:** :code:`("djangoX.Y")` where :code:`X` and :code:`Y` are respectively the major and minor versions
| **Example:** :code:`DCP_INCLUDE_FIXER_FAMILIES = ["django1.9"]`

DCP_EXCLUDE_FIXER_IDS
*********************
List of fixer names to exclude.

Note: The "INCLUDE" filters are applied before the "EXCLUDE" ones.

| **Default:** :code:`[]`
| **Type:** List of strings
| **Example:** :code:`DCP_EXCLUDE_FIXER_IDS = ['fix_deletion_templatetags_future_url']`

DCP_EXCLUDE_FIXER_FAMILIES
**************************
List of fixer families to exclude.

Note: The "INCLUDE" filters are applied before the "EXCLUDE" ones.

| **Default:** :code:`[]`
| **Type:** List of strings
| **Choices:** :code:`("djangoX.Y")` where :code:`X` and :code:`Y` are respectively the major and minor versions
| **Example:** :code:`DCP_EXCLUDE_FIXER_FAMILIES = ["django1.6", "django1.9"]`

DCP_PATCH_INJECTED_OBJECT
*************************

The patcher adds a :code:`__dcp_injected__ = True` attribute to the injected callables, modules and classes.

| **Default:** :code:`True`
| **Type:** Boolean
| **Example:** :code:`DCP_PATCH_INJECTED_OBJECT = False`


Table of fixers
===============

There are currently 17 available fixers.

+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Fixer name                                                                                                                                                  | Fixer family                                                                                                                                                | Min version                                                                                                                                                 | Max version                                                                                                                                                 |
+=============================================================================================================================================================+=============================================================================================================================================================+=============================================================================================================================================================+=============================================================================================================================================================+
| **fix_deletion_http_request_HttpRequest_raw_post_data** (Preserve the request.raw_post_data alias for request.body.)                                        | django1.6                                                                                                                                                   | 1.6                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_utils_datastructures_MergeDict** (Preserve the MergeDict util datastructure)                                                                 | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_utils_datastructures_SortedDict** (Preserve the SortedDict util datastructure)                                                               | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_utils_dictconfig** (Preserve the dictconfig util file)                                                                                       | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_utils_importlib** (Preserve the importlib util file)                                                                                         | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_utils_tzinfo** (Preserve the tzinfo util file)                                                                                               | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_utils_unittest** (Preserve the unittest util file)                                                                                           | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_core_handlers_wsgi_WSGIRequest_REQUEST** (Preserve the `request.REQUEST` attribute, merging parameters from GET)                             | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_contrib_admin_ModelAdmin_get_formsets** (Preserve the get_formsets method of ModelAdmin)                                                     | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_templatetags_future_url** (Preserve the `url` tag in the `future` templatetags library.)                                                     | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_templatetags_future_ssi** (Preserve the `ssi` tag in the `future` templatetags library.)                                                     | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_forms_fields_IPAddressField** (Preserve the IPAddressField model field, now superseded by GenericIPAddressField)                             | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_django_core_management_base_AppCommand_handle_app** (Preserve the fallback to AppCommand.handle_app() method in django management commands.) | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_contrib_sites_models_RequestSite** (Preserve contrib.sites.models.RequestSite alias.)                                                        | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_contrib_sites_models_get_current_site** (Preserve contrib.sites.models.get_current_site alias.)                                              | django1.9                                                                                                                                                   | 1.9                                                                                                                                                         |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_templatetags_future** (Preserve the "future" templatetags library, with its improved `firstof` and `cycle` tags.)                            | django1.10                                                                                                                                                  | 1.10                                                                                                                                                        |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
| **fix_deletion_template_defaulttags_ssi** (Preserve the "ssi" default template tag.)                                                                        | django1.10                                                                                                                                                  | 1.10                                                                                                                                                        |                                                                                                                                                             |
+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------+
